---
title: Integrating Flatpeak Connect API into your app
sidebarTitle: "1b. Connect API"
mode: "wide"
---

Use this guide integrate Flatpeak’s Connect flow into your app using your existing framework.

<Info>We recommend reviewing the [WebView integraiton guide](/guides/connect/webview) before starting this guide. It provides helpful context on how the Connect flow works and what to expect during integration.</Info>

Connect uses a JSON-based conversation flow, not a traditional REST pattern.

<Steps>
  <Step title="Start the Connect Session">

	1.	Present a “Connect My Tariff” button (or similar UI control).
	2.	Call the [create-connect-token](/api-reference/zero/connect/create-a-connect-token) endpoint to generate a temporary `connect_token`.
	3.	Use the token to launch the session via the [session_restore](/api-reference/zero/connect/start-a-connect-session) endpoint.

  Your app is now ready to interact with Connect.

  </Step>
  <Step title="Implement Connect pages">

  After calling [session_restore](/api-reference/zero/connect/start-a-connect-session), Connect replies with a JSON-based sequence of Page Objects, beginning with [Postal Address](/api-reference/zero/connect/postal-address). Each object represents a step in the flow and has its own reference page.

  Your app must:

    - Render the UI as required by the current Page Object,
    - Capture user input,
    - Send it back to the Connect API,
    - Receive the next Page Object in sequence.

  This loop continues until the session completes.

 ```mermaid
sequenceDiagram
  participant Your App as Your App
  participant Connect as Connect API

  Your App ->> Connect: POST /session_restore
  Connect -->> Your App: Page Object — Postal Address
  Your App ->> Connect: Respond with data
  Connect -->> Your App: Page Object — Provider Selection
  Your App ->> Connect: Respond with data
  Connect -->> Your App: Page Object — Contract Terms
  Note over Connect: Continues until session_complete
  ```

  </Step>
  <Step title="Handle Completion">
  
  Once the flow completes:
	
  -	You receive a [session_complete](/api-reference/zero/connect/complete-a-connect-session) page.
  - The customer is redirected to the `callback_uri` set in [create-connect-token](/api-reference/zero/connect/create-a-connect-token) step. Use this to notify your backend.
  - Call the [exchange-connect-token](/api-reference/zero/connect/exchange-a-connect-token) endpoint to exchange the `connect_token` for a permanent `location_id`, and store it with the customer’s address record in your backend.

  </Step>
  <Step title="Subscribe to Lifecycle Webhooks">

  Flatpeak keeps tariff data up to date post-connection. If customer action is needed (e.g. expired password), Flatpeak will generate an events and send it to you via webhook. [Subscribe](/guides/connect/lifecycle) to them to inform users and guide them to re-connect when necessary.

  </Step>
  <Step title="Allow Configuration Changes">

  To let your customers review or update their tariffs post-connection, refer to the [Tariff Settings Page](/guides/connect/settings-page) guide to provide UI controls for customers to view, reconnect, or adjust their tariff flows—including commodity, export, or grid-fee options.

  </Step>
</Steps>

## Next steps

After connecting the tariff, you can access:

  - Energy [scheduling](/guides/scheduling) endpoints,
  - Energy [cost reporting](/guides/reporting) endpoints.

## Summary workflow


| Step | Action                                                                 |
|:------|:------------------------------------------------------------------------|
| 1    | UI triggers Connect flow using `create-connect-token` and `session_restore` |
| 2    | App loops through Page Objects: render, collect input, send response   |
| 3    | On `session_complete`, exchange token for `location_id`                |
| 4    | Subscribe to lifecycle webhooks (`tariff.expiring`, `tariff.expired`, `tariff.fetch.failed`) |
| 5    | Offer tariff settings UI for reconnecting or adjusting flows           |
| 6    | Use scheduling, cost reporting, or raw rate endpoints as needed        |